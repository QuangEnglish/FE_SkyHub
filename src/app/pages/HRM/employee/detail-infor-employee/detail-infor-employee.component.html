<div class="ant-breadcrumb-custom">
  <nz-breadcrumb>
    <nz-breadcrumb nzSeparator=">">
      <nz-breadcrumb-item>
        <a>Hành chính nhân sự</a>
      </nz-breadcrumb-item>
      <nz-breadcrumb-item>
        <a>Quản lý nhân sự</a>
      </nz-breadcrumb-item>
      <nz-breadcrumb-item>
        <a>Tra cứu thông tin chung</a>
      </nz-breadcrumb-item>
    </nz-breadcrumb>
  </nz-breadcrumb>
</div>
<dx-scroll-view class="view-wrapper-scroll">
  <div class="view-wrapper" id="contentToConvert">
    <dx-toolbar class="toolbar-details theme-dependent">
      <dxi-item location="before">
        <dx-button icon="arrowleft" stylingMode="text" (click)="redirectToPreviousPage()"></dx-button>
      </dxi-item>
      <dxi-item location="before" [text]="contactName"></dxi-item>
      <dxi-item location="after" locateInMenu="auto" style="margin-right: 10px;">
        <dx-button
          text="Xuất file PDF"
          type="default"
          stylingMode="contained"
          (click)="onExportPdf()"
        ></dx-button>
      </dxi-item>
      <dxi-item location="after" locateInMenu="auto">
        <div class="separator"></div>
      </dxi-item>
      <dxi-item
        location="after"
        locateInMenu="auto"
        widget="dxButton"
        showText="inMenu"
        [options]="{
          text: 'Copy',
          icon: 'copy',
          stylingMode: 'text'
        }"
      ></dxi-item>
      <dxi-item
        location="after"
        locateInMenu="auto"
        widget="dxButton"
        showText="inMenu"
        [options]="{
          text: 'Refresh',
          icon: 'refresh',
          onClick: refresh,
          stylingMode: 'text'
        }"
      ></dxi-item>
    </dx-toolbar>

    <div class="panels theme-dependent">
      <!--      <div class="left" style="position: relative; height: 100vh;">-->
      <!--      </div>-->

      <!--      <div class="right theme-dependent">-->
      <!--        <app-information-flow></app-information-flow>-->
      <!--      </div>-->
    </div>
    <div class="wrapper-app-panel">
      <div class="data-wrapper">
        <ng-container *ngIf="!isLoading">
          <dx-toolbar class="panel-toolbar">
            <dxi-item location="before" cssClass="accent">
              <div *dxTemplate style="display: flex;">
                <div *ngIf="!isDisablePinClose"
                     [ngClass]="user.isActive == 2 ? 'circle-button-success' : 'circle-button-danger'">
                </div>
                <app-form-textbox
                  [(value)]="user.employeeName"
                  [isEditing]="isEditing"
                  [isEditText]="true"
                >
                </app-form-textbox>
              </div>
            </dxi-item>
          </dx-toolbar>

          <dx-scroll-view class="panel-scroll">
            <dx-validation-group>
              <div class="data-part">
                <dx-form
                  class="plain-styled-form"
                  labelMode="floating"
                  [class.view-mode]="!isEditing"
                >
                  <dxi-item itemType="group" [colCount]="2" cssClass="photo-row">
                    <dxo-col-count-by-screen [xs]="2"></dxo-col-count-by-screen>
                    <dxi-item cssClass="photo-box">
                      <div *dxTemplate>
                        <div style="margin-left: 30px;">
                          <app-form-photo *ngIf="!isEditing" [link]="user.avatar"></app-form-photo>
                        </div>
                        <dx-file-uploader
                          *ngIf="isEditing"
                          [multiple]="true"
                          selectButtonText="Chọn file ảnh"
                          labelText="Ảnh đại diện"
                          accept="image/*"
                          uploadMode="useForm"
                        >
                        </dx-file-uploader>
                        <div style="margin: 30px;">
                          <dxi-item>
                            <app-form-textbox
                              icon="tel"
                              mask="+1(000)000-0000"
                              [(value)]="user.phone"
                              [isEditing]="isEditing"
                            >
                            </app-form-textbox>
                          </dxi-item>
                          <dxi-item>
                            <app-form-textbox
                              icon="email"
                              [(value)]="user.email"
                              [isEditing]="isEditing"
                              [validators]="[{ type: 'email' }]"
                            ></app-form-textbox>
                          </dxi-item>
                          <dxi-item>
                            <app-form-textbox
                              icon="home"
                              [(value)]="user.address"
                              [isEditing]="isEditing"
                              [validators]="[]"
                            >
                            </app-form-textbox>
                          </dxi-item>
                        </div>
                      </div>
                    </dxi-item>
                    <dxi-item itemType="group">
                      <dxi-item cssClass="accent">
                        <div *dxTemplate>
                          <app-form-textbox
                            label="Mã nhân viên"
                            [(value)]="user.employeeCode"
                            [isEditing]="isEditing"
                          ></app-form-textbox>
                        </div>
                      </dxi-item>

                      <dxi-item itemType="group">
                        <dxi-item cssClass="accent">
                          <div *dxTemplate>
                            <app-form-textbox
                              *ngIf="!isEditing"
                              label="Phòng ban"
                              [(value)]="user.departmentName"
                              [isEditing]="isEditing"
                            ></app-form-textbox>
                            <dx-select-box
                              *ngIf="isEditing"
                              [label]="'Phòng ban'"
                              [dataSource]="lstDepartment"
                              valueExpr="departmentId"
                              displayExpr="departmentName"
                              [searchEnabled]="true"
                              [(value)]="user.departmentId">
                            </dx-select-box>
                          </div>
                        </dxi-item>
                      </dxi-item>

                      <dxi-item itemType="group">
                        <dxi-item cssClass="accent">
                          <div *dxTemplate>
                            <app-form-textbox
                              *ngIf="!isEditing"
                              label="Chức vụ"
                              [(value)]="user.positionName"
                              [isEditing]="isEditing"
                            ></app-form-textbox>
                            <dx-select-box
                              *ngIf="isEditing"
                              [label]="'Chức vụ'"
                              [dataSource]="lstPosition"
                              valueExpr="id"
                              displayExpr="positionName"
                              [searchEnabled]="true"
                              [(value)]="user.positionId"
                            >
                            </dx-select-box>
                          </div>
                        </dxi-item>
                      </dxi-item>

                      <dxi-item cssClass="accent">
                        <div *dxTemplate>
                          <app-form-textbox
                            label="Ngày sinh"
                            [(value)]="user.birthday"
                            [isEditing]="isEditing"
                          ></app-form-textbox>
                        </div>
                      </dxi-item>
                    </dxi-item>
                  </dxi-item>

                  <!--                  <dxi-item itemType="group" cssClass="contact-fields-group">-->
                  <!--                    <dxi-item>-->
                  <!--                      <div *dxTemplate>-->
                  <!--                        <app-form-textbox-->
                  <!--                          icon="tel"-->
                  <!--                          mask="+1(000)000-0000"-->
                  <!--                          [(value)]="user.phone"-->
                  <!--                          [isEditing]="isEditing"-->
                  <!--                        >-->
                  <!--                        </app-form-textbox>-->
                  <!--                      </div>-->
                  <!--                    </dxi-item>-->
                  <!--                    <dxi-item>-->
                  <!--                      <div *dxTemplate>-->
                  <!--                        <app-form-textbox-->
                  <!--                          icon="email"-->
                  <!--                          [(value)]="user.email"-->
                  <!--                          [isEditing]="isEditing"-->
                  <!--                          [validators]="[{ type: 'email' }]"-->
                  <!--                        ></app-form-textbox>-->
                  <!--                      </div>-->
                  <!--                    </dxi-item>-->
                  <!--                    <dxi-item>-->
                  <!--                      <div *dxTemplate>-->
                  <!--                        <app-form-textbox-->
                  <!--                          icon="home"-->
                  <!--                          [(value)]="user.address"-->
                  <!--                          [isEditing]="isEditing"-->
                  <!--                          [validators]="[]"-->
                  <!--                        >-->
                  <!--                        </app-form-textbox>-->
                  <!--                      </div>-->
                  <!--                    </dxi-item>-->
                  <!--                  </dxi-item>-->
                </dx-form>
              </div>
            </dx-validation-group>
          </dx-scroll-view>
        </ng-container>

        <dx-load-panel
          container=".panel"
          [width]="300"
          [visible]="isLoading"
          [showPane]="false"
          [position]="{ of: '.panel' }"
        ></dx-load-panel>
      </div>
    </div>
    <app-list-qualification-manager></app-list-qualification-manager>
    <app-list-contract-for-employee></app-list-contract-for-employee>
    <app-list-socialinsurance-managerment></app-list-socialinsurance-managerment>
    <app-list-wage-for-employee></app-list-wage-for-employee>

  </div>
</dx-scroll-view>
